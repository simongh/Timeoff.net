<h1>New employee</h1>

<div class="row">
    <div class="col-md-6 lead">Adding new employee account</div>
    <div class="col-md-6">
        <a class="btn btn-default pull-right" routerLink="/users/import" id="import_users_btn">Import new employees <i class="fa-solid fa-chevron-right"></i></a>
    </div>
</div>

<flash-message/>

<div class="row">
    <div class="col-md-6">
        <user-breadcrumb name="Add new employee"/>
    </div>
</div>

<div class="row main-row_header">
    <p class="col-md-12">Details of new employee</p>
</div>

<div class="row">
    <div class="col-md-12">

        <form class="form-horizontal" [formGroup]="form" id="add_new_user_form">

            <div class="form-group">
                <label for="firstName" class="col-md-3 control-label">First Name</label>
                <div class="col-md-3">
                    <input class="form-control" formControlName="firstName" for="firstName"/>
                    <validator-message controlName="firstName" validatorName="required">First name is required</validator-message>
                </div>
            </div>

            <div class="form-group">
                <label for="lastName" class="col-md-3 control-label">Last Name</label>
                <div class="col-md-3">
                    <input class="form-control" formControlName="lastName" for="lastName"/>
                    <validator-message controlName="lastName" validatorName="required">Last name is required</validator-message>
                </div>
            </div>

            <div class="form-group">
                <label for="email" class="col-md-3 control-label">Email Address</label>
                <div class="col-md-3">
                    <input class="form-control" formControlName="email" for="email" type="email" aria-describedby="email_help"/>
                    <validator-message controlName="email" validatorName="required">Email is required</validator-message>
                    <validator-message controlName="email" validatorName="email">Email address should be valid</validator-message>
                </div>
                <span id="email_help" class="help-block col-md-6">Email address used by employee</span>
            </div>

            <div class="form-group">
                <label for="team" class="col-md-3 control-label">Team</label>
                <div class="col-md-3">
                    <team-select [control]="form.controls.team" for="team" aria-describedby="team_help"/>
                </div>
                <span id="team_help" class="help-block col-md-6">Team employee belongs to</span>
            </div>

            <div class="form-group">
                <div class="col-md-3 col-md-offset-3">
                    <label for="isAdmin" class="_col-md-2 control-label">
                        <input class="" formControlName="isAdmin" for="isAdmin" type="checkbox" value="true" />
                        Is administrator user
                    </label>
                </div>
            </div>

            <div class="form-group">
                <div class="col-md-3 col-md-offset-3">
                    <label for="autoApprove" class="control-label">
                        <input class=""formControlName="autoApprove" for="autoApprove" type="checkbox" value="true"/>
                        Auto approve leave requests
                    </label>
                </div>
                <span class="help-block">Set the flag ON to streamline leave requests from this employee directly into <strong>Approved</strong> state.</span>
            </div>

            <div class="form-group">
                <label for="startDate" class="col-md-3 control-label">Started on</label>
                <div class="col-md-3 date" >
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa-solid fa-calendar"></i></span>
                    <input class="form-control" dateInput type="text" formControlName="startDate" aria-describedby="start_date_help" [maxDate]="form.value.endDate"/>
                </div>
                <validator-message controlName="startDate" validatorName="required">A start date is required</validator-message>
            </div>
                <div id="start_date_help" class="help-block col-md-6">Date when employee started (inclusive)</div>
            </div>

            <div class="form-group">
                <label for="endDate" class="col-md-3 control-label">Ended on</label>
                <div class="col-md-3 date">
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa-solid fa-calendar"></i></span>
                        <input class="form-control" dateInput type="text" formControlName="endDate" aria-describedby="end_date_help" [minDate]="form.value.startDate"/>
                    </div>
                </div>
                <span id="end_date_help" class="help-block col-md-6">
                    <div>Date when employee leaves {{companyName()}}.</div>
                    <div>After this date the user is no longer able to access the application.</div>
                    <div>This is a way of deactivating user accounts.</div>
                </span>
            </div>

            <div class="form-group">
                <div class="col-md-offset-3 col-md-3">
                    <button (click)="add()" [disabled]="submitting()" type="button" id="add_new_user_btn" class="btn btn-success pull-right single-click">Add new employee</button>
                </div>
            </div>
        </form>

    </div>
</div>
